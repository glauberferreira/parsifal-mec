{% extends 'base.html' %}
{% load i18n %}

{% load humanize %}

{% load staticfiles %}

{% block title %} {% trans 'Planning'  %} Â· {{ review.title }}{% endblock %}

{% block javascript %}
  <script src="{% static 'js/planning_data_extraction.js' %}?_=2"></script>
{% endblock javascript %}

{% block content %}

  {% include 'reviews/review_header.html' with active_menu='planning' %}
  {% include 'planning/planning_header.html' with active_tab='extraction' %}

  {% csrf_token %}

  <section id="data-extraction-section" style="margin-bottom: 20px;">
    <div class="modal fade" id="import-dataextraction">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">{% trans 'Import Data Extraction Fields' %}</h4>
          </div>
          <div class="modal-body">
            <p style="margin-bottom: 20px;">{% trans 'Below you see the reviews that exported your data extraction fields, choose one to import the fields for your review' %}</p>
            <table class="table" id="tbl-import-data-extraction">
              <thead>
                <tr>
                  <th>{% trans 'ID' %}</th>
                  <th>{% trans 'Review' %}</th>
                  <th>{% trans 'Author' %}</th>
                  <th>{% trans 'Fields' %}</th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="export-dataextraction">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">{% trans 'Export Data Extraction Fields' %}</h4>
          </div>
          <div class="modal-body">
            <p>{% trans 'If you agree, your data extraction fields will be made known to other users to use them' %}</p>
          </div>
          <div class="modal-footer" style="text-align: left;">
            <button type="button" id="confirm-dataextraction-export" class="btn btn-success btn-block" data-keyword-id="">{% trans 'Export Data Extraction Fields' %}</button>
          </div>
        </div>
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">{% trans 'Data Extraction Form' %}</h3>
      </div>
      <table class="table" id="tbl-data-extraction">
        <thead>
          <tr>
            <th></th>
            <th>{% trans 'Description' %}</th>
            <th>{% trans 'Type' %}</th>
            <th>{% trans 'Values' %}</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for field in review.get_data_extraction_fields %}
            {% include "planning/partial_data_extraction_field.html" with field=field %}
          {% empty %}
            {% include "planning/partial_data_extraction_field_form.html" with field=empty_field %}
          {% endfor %}
        </tbody>
      </table>
      <div class="panel-footer">
        <button type="button" class="btn btn-primary" id="btn-add-field">
          <span class="glyphicon glyphicon-plus"></span>
          {% trans 'Add Field' %}
        </button>
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#import-dataextraction">
          <span class="glyphicon glyphicon-import"></span>
          {% trans 'Import Fields' %}
        </button>
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#export-dataextraction">
          <span class="glyphicon glyphicon-export"></span>
          {% trans 'Export Fields' %}
        </button>
      </div>
    </div>
  </section>

{% endblock content %}
